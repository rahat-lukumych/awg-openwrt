# –ü–∞–∫–µ—Ç—ã amneziawg –¥–ª—è —Ä–æ—É—Ç–µ—Ä–æ–≤ —Å –ø—Ä–æ—à–∏–≤–∫–æ–π OpenWRT

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ AmneziaWG –¥–ª—è OpenWRT –≤–µ—Ä—Å–∏–∏ 23.05.0 –∏ –±–æ–ª–µ–µ –Ω–æ–≤—ã—Ö
1) –ï—Å–ª–∏ –≤–∞—à —Ä–æ—É—Ç–µ—Ä –æ–±–ª–∞–¥–∞–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º –æ–±—ä–º–æ–º –¥–æ—Å—Ç—É–ø–Ω–æ–π RAM, —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º, –æ–ø–∏—Å–∞–Ω–Ω—ã–º –Ω–∏–∂–µ, —Ç–æ–ª—å–∫–æ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω—É–∂–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤, –∞ –¥–ª—è —Ç–æ—á–µ—á–Ω–æ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ —Ç—Ä–∞—Ñ—Ñ–∏–∫–∞ –≤ —Ç—É–Ω–Ω–µ–ª—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å podkop –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è [@itdoginfo](https://github.com/itdoginfo) - —Ç—É—Ç –≤ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://podkop.net/docs/tunnels/awg_settings/) –æ–ø–∏—Å–∞–Ω –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

2) –ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç—ã, —è –¥–æ–±–∞–≤–∏–ª —Å–∫—Ä–∏–ø—Ç amneziawg-install - –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∞–µ—Ç –ø–∞–∫–µ—Ç—ã –∏–∑ —ç—Ç–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –ø–æ–¥ –≤–∞—à–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ OpenWRT), –∞ —Ç–∞–∫–∂–µ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç —Å—Ä–∞–∑—É –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º AmneziaWG. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–≥–ª–∞—Å–∏—Ç—Å—è, –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –≤–≤–µ—Å—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥–∞, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø—Ä–æ—Å–∏—Ç —Å–∫—Ä–∏–ø—Ç. –ü—Ä–∏ —ç—Ç–æ–º —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –Ω–∞—Å—Ç—Ä–æ–∏—Ç –¥–ª—è –Ω–µ–≥–æ –ø—Ä–∞–≤–∏–ª–∞ —Ñ–∞–µ—Ä–≤–æ–ª–ª–∞, –∞ —Ç–∞–∫–∂–µ **–≤–∫–ª—é—á–∏—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ–≥–æ —Ç—Ä–∞—Ñ—Ñ–∏–∫–∞ —á–µ—Ä–µ–∑ —Ç—É–Ω–µ–ª—å AmneziaWG** (—É—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Peer –≥–∞–ª–æ—á–∫—É Route Allowed IPs).
–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Ä–æ—É—Ç–µ—Ä—É –ø–æ SSH, –≤–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –∏ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –Ω–∞ —ç–∫—Ä–∞–Ω–µ:
```
sh <(wget -O - https://raw.githubusercontent.com/rahat-lukumych/awg-openwrt/refs/heads/master/amneziawg-install.sh)
```

3) –ö—Ä–æ–º–µ —Ç–æ–≥–æ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [—Å–∫—Ä–∏–ø—Ç](https://github.com/itdoginfo/domain-routing-openwrt) –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è [@itdoginfo](https://github.com/itdoginfo). –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∞—Ç—å –Ω—É–∂–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –∏–∑ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –∑–¥–µ—Å—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å [—Ç–æ—á–µ—á–Ω—ã–π –æ–±—Ö–æ–¥ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –ø–æ –¥–æ–º–µ–Ω–∞–º](https://habr.com/ru/articles/767464/). –ü–æ–¥–æ–π–¥—ë—Ç, –µ—Å–ª–∏ —É –≤–∞—Å —Å–ª–∞–±—ã–π —Ä–æ—É—Ç–µ—Ä —Å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º –æ–±—ä—ë–º–æ–º RAM –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ podkop-a –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

## –°–±–æ—Ä–∫–∞ –ø–∞–∫–µ—Ç–æ–≤ –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏—Ö OpenWRT
–í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–æ–±–∞–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–∞—Ä—Å–∏—Ç –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã OpenWRT –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–±–æ—Ä–∫—É –ø–∞–∫–µ—Ç–æ–≤ AmneziaWG –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤.
–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —è —Å–æ–±—Ä–∞–ª –ø–∞–∫–µ—Ç—ã –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –¥–ª—è OpenWRT –≤–µ—Ä—Å–∏–π:
1) [23.05.0](https://github.com/Slava-Shchipunov/awg-openwrt/releases/tag/v23.05.0)
2) [23.05.1](https://github.com/Slava-Shchipunov/awg-openwrt/releases/tag/v23.05.1)
3) [23.05.2](https://github.com/Slava-Shchipunov/awg-openwrt/releases/tag/v23.05.2)
4) [23.05.3](https://github.com/Slava-Shchipunov/awg-openwrt/releases/tag/v23.05.3)
5) [23.05.4](https://github.com/Slava-Shchipunov/awg-openwrt/releases/tag/v23.05.4)
6) [23.05.5](https://github.com/Slava-Shchipunov/awg-openwrt/releases/tag/v23.05.5)
7) AWG-2.0 [23.05.6](https://github.com/Slava-Shchipunov/awg-openwrt/releases/tag/v23.05.6)
8) [24.10.0](https://github.com/Slava-Shchipunov/awg-openwrt/releases/tag/v24.10.0)
9) [24.10.1](https://github.com/Slava-Shchipunov/awg-openwrt/releases/tag/v24.10.1)
10) [24.10.2](https://github.com/Slava-Shchipunov/awg-openwrt/releases/tag/v24.10.2)
11) AWG-2.0 [24.10.3](https://github.com/Slava-Shchipunov/awg-openwrt/releases/tag/v24.10.3)

–¢–∞–∫–∂–µ –∑–∞–ø—É—Å–∫–∞–ª —Å–±–æ—Ä–∫—É –¥–ª—è –≤–µ—Ä—Å–∏–∏ [22.03.7](https://github.com/Slava-Shchipunov/awg-openwrt/releases/tag/v22.03.7), –Ω–æ —Ç–∞–º –¥–ª—è –¥–≤—É—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º —Å–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å –æ—à–∏–±–∫–æ–π. –¢–∞–∫ –∫–∞–∫ —ç—Ç–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è OpenWRT, —è –Ω–µ —Å—Ç–∞–ª —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è, –≤ —á–µ–º –ø—Ä–æ–±–ª–µ–º–∞.

–í –¥–∞–ª—å–Ω–µ–π—à–µ–º –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –Ω–æ–≤—ã—Ö —Ä–µ–ª–∏–∑–æ–≤ OpenWRT –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è —Ä–µ–ª–∏–∑—ã —Å –ø–∞–∫–µ—Ç–∞–º–∏ AmneziaWG –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è —Å–±–æ—Ä–∫–∞ –ø–∞–∫–µ—Ç–æ–≤ –ø–æ–¥ –≤—Å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π. Github action –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ä–µ–ª–∏–∑–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑ –≤ 3 –¥–Ω—è, –∞ —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω –≤—Ä—É—á–Ω—É—é.

## –í—ã–±–æ—Ä –ø–∞–∫–µ—Ç–æ–≤ –¥–ª—è —Å–≤–æ–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
–í —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ø—É–Ω–∫—Ç–æ–º [–£–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Å–±–æ—Ä–∫–∏](https://github.com/itdoginfo/domain-routing-openwrt/wiki/Amnezia-WG-Build#%D1%83%D0%BA%D0%B0%D0%B7%D1%8B%D0%B2%D0%B0%D0%B5%D0%BC-%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D1%8B%D0%B5-%D0%B4%D0%BB%D1%8F-%D1%81%D0%B1%D0%BE%D1%80%D0%BA%D0%B8)
–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å `target` –∏ `subtarget` –≤–∞—à–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞. –î–∞–ª–µ–µ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–ª–∏–∑–∞, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –≤–∞—à–µ–π –≤–µ—Ä—Å–∏–∏ OpenWRT, –∑–∞—Ç–µ–º –ø–æ–∏—Å–∫–æ–º –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (Ctrl+F) –Ω–∞–π—Ç–∏ 3 –ø–∞–∫–µ—Ç–∞, –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ—Ç–æ—Ä—ã—Ö –æ–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ `target_subtarget.ipk`, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –≤–∞—à–µ–º—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É. –î–ª—è –≤–µ—Ä—Å–∏–∏ AWG 2.0 —Ç–∞–∫–∂–µ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–∞–∫–µ—Ç —Ä—É—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏  luci-i18n-amneziawg-ru

## –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–±–æ—Ä–∫—É –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
1) –°–æ–∑–¥–∞—Ç—å —Ñ–æ—Ä–∫ —ç—Ç–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2) –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É Actions –∏ –≤–∫–ª—é—á–∏—Ç—å Github actions (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Ñ–æ—Ä–∫–æ–≤ –æ–Ω–∏ –≤—ã–∫–ª—é—á–µ–Ω—ã)
3) –ó–∞—Ç–µ–º –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É Code => Releases (–≤ –ø—Ä–∞–≤–æ–π —á–∞—Å—Ç–∏ —ç–∫—Ä–∞–Ω–∞) => Draft a new release
4) –ù–∞–∂–∞—Ç—å Choose a tag –∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–µ–≥ —Ñ–æ—Ä–º–∞—Ç–∞ vX.X.X, –≥–¥–µ –≤–º–µ—Å—Ç–æ X.X.X –Ω—É–∂–Ω–æ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—å —Ç—Ä–µ–±—É–µ–º—É—é –≤–µ—Ä—Å–∏—é OpenWRT, –Ω–∞–ø—Ä–∏–º–µ—Ä, v23.05.4
5) –í—ã–±—Ä–∞—Ç—å –≤ –∫–∞—á–µ—Å—Ç–≤–µ target –≤–µ—Ç–∫—É `master`
6) –í–≤–µ—Å—Ç–∏ Release title
7) –ù–∞–∂–∞—Ç—å –≤–Ω–∏–∑—É –∑–µ–ª–µ–Ω—É—é –∫–Ω–æ–ø–∫—É Publish release

–î–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ Github –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–∞–Ω–Ω–µ—Ä–æ–≤, —É –º–µ–Ω—è –∑–∞–ø—É—Å–∫–∞–ª–æ—Å—å –¥–æ 20 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –¥–∂–æ–±. –ö–∞–∂–¥–∞—è –¥–∂–æ–±–∞  –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–∫–æ–ª–æ 10-15 –º–∏–Ω—É—Ç, –æ–±—â–µ–µ –≤—Ä–µ–º—è –Ω–∞ —Å–±–æ—Ä–∫—É –æ–∫–æ–ª–æ 60 –º–∏–Ω—É—Ç.

## –°–±–æ—Ä–∫–∞ –ø–∞–∫–µ—Ç–æ–≤ –ø–æ–¥ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É
–ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–±–æ—Ä–∫—É –ø–∞–∫–µ—Ç–æ–≤ AWG 1.0 –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ [–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –Ω–∞ –≤–∏–∫–∏](https://github.com/itdoginfo/domain-routing-openwrt/wiki/Amnezia-WG-Build). –°–±–æ—Ä–∫–∞ –ø–æ–¥ –æ–¥–Ω–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∑–∞–π–º–µ—Ç –æ–∫–æ–ª–æ 2 —á–∞—Å–æ–≤.

AWG 2.0 –º–æ–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å –ø–æ–¥ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:
1) –°–æ–∑–¥–∞—Ç—å —Ñ–æ—Ä–∫ —ç—Ç–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2) –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É Actions –∏ –≤–∫–ª—é—á–∏—Ç—å Github actions (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Ñ–æ—Ä–∫–æ–≤ –æ–Ω–∏ –≤—ã–∫–ª—é—á–µ–Ω—ã)
3) –°–ª–µ–≤–∞ –≤ —Å–ø–∏—Å–∫–µ —ç–∫—à–µ–Ω–æ–≤ –≤—ã–±—Ä–∞—Ç—å —ç–∫—à–µ–Ω Create Release on Tag
4) –°–ø—Ä–∞–≤–∞ –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É Run workflow
5) –í –æ—Ç–∫—Ä—ã–≤—à–µ–º—Å—è —Å–ø–∏—Å–∫–µ —É–∫–∞–∑–∞—Ç—å –≤–µ—Ä—Å–∏—é Openwrt (–Ω–∞–ø—Ä–∏–º–µ—Ä, 24.10.3), —Å–ø–∏—Å–æ–∫ target, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—è—Ç—ã–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, stm32,ramips), —Å–ø–∏—Å–æ–∫ subtarget, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—è—Ç—ã–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, stm32mp1,mt7621). –°–±–æ—Ä–∫–∞ –±—É–¥–µ—Ç –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–∞—Ä target/subtarget
6) –ù–∞–∂–∞—Ç—å –∑–µ–ª–µ–Ω—É—é –∫–Ω–æ–ø–∫—É Run workflow
–°–±–æ—Ä–∫–∞ –ø–æ–¥ –æ–¥–Ω–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∑–∞–π–º–µ—Ç –æ–∫–æ–ª–æ 10-15 –º–∏–Ω—É—Ç. –ü—Ä–∏ —ç—Ç–æ–º –¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞—Ç—å—Å—è —Ä–µ–ª–∏–∑ —Å —É–∫–∞–∑–∞–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π OpenWRT

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

–û–≥—Ä–æ–º–Ω–æ–µ —Å–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–º–æ—â—å –≤ —Å–±–æ—Ä–∫–µ –ø–∞–∫–µ—Ç–æ–≤ AWG 2.0:

- [@kozhini](https://github.com/kozhini) –∏ [@this-username-has-been-taken](https://github.com/this-username-has-been-taken) ‚Äî ~~—É –∫–æ—Ç–æ—Ä—ã—Ö —è –ø–æ–∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–ª –∫–æ–¥ Makefile-–æ–≤~~ —á—å–∏–º –ø—Ä–∏–º–µ—Ä–æ–º —è –≤–¥–æ—Ö–Ω–æ–≤–ª—è–ª—Å—èüôÉ
- [@Kot-nikot](https://github.com/Kot-nikot) –∏ [@Onotot](https://github.com/Onotot) ‚Äî –∑–∞ –ø–æ–ª–µ–∑–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ –ø–æ–¥—Å–∫–∞–∑–∫–∏ü§ù
- [@ygurov](https://github.com/ygurov) - –∑–∞ [–∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—é](https://github.com/amnezia-vpn/amneziawg-linux-kernel-module/pull/88) awg 2.0 –¥–ª—è –º–æ–¥—É–ª—è —è–¥—Ä–∞ üí™
- –ê —Ç–∞–∫–∂–µ –≤—Å–µ–º, –∫—Ç–æ –ø—Ä–∏–Ω–æ—Å–∏–ª –ø–æ–ª–µ–∑–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –≤ –ª–∏—á–∫—É –∏ –≤ [–∏—à—å—é](https://github.com/Slava-Shchipunov/awg-openwrt/issues/39), –æ—Ç–ø–∏—Å—ã–≤–∞–ª–∏—Å—å –≤ –∫–æ–º–º–µ–Ω—Ç—ã –∫ PR —Å –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏–µ–π –æ –≤–æ–∑–Ω–∏–∫—à–∏—Ö –±–∞–≥–∞—Ö –∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö ‚ù§Ô∏è

## Automatic configuration of AmneziaWG for OpenWRT version 23.05.0 and newer
1) If your router has enough available RAM, I recommend using the script described below only to install the necessary packages, and use podkop from user [@itdoginfo](https://github.com/itdoginfo) for selective traffic routing into the tunnel - the setup process is described in the [documentation](https://podkop.net/docs/tunnels/awg_settings/)

2) If you only need to install packages, I added the amneziawg-install script - it will automatically download packages from this repository for your device (only for the stable version of OpenWRT), and also offer to immediately configure the interface with the AmneziaWG protocol. If the user agrees, you will need to enter the config parameters that the script will request. The script will create an interface, configure firewall rules for it, and also **enable redirection of all traffic through the AmneziaWG tunnel** (check the Route Allowed IPs box in the Peer settings).
To run the script, connect to the router via SSH, enter the command and follow the instructions on the screen:
```
sh <(wget -O - https://raw.githubusercontent.com/Slava-Shchipunov/awg-openwrt/refs/heads/master/amneziawg-install.sh)
```

3) In addition, for automatic configuration you can also use the [script](https://github.com/itdoginfo/domain-routing-openwrt) from user [@itdoginfo](https://github.com/itdoginfo). This script allows you to automatically download the necessary packages from those collected here and configure [point-by-point bypass of blocking by domains](https://habr.com/ru/articles/767464/) (instructions in Russian). Suitable if you have a weak router with insufficient RAM to install podkop and its dependencies

# Building packages for all devices that support OpenWRT
A script has been added to the repository that parses data on supported platforms from the OpenWRT page and automatically starts building AmneziaWG packages for all devices.
At the moment I have collected packages for all devices for OpenWRT versions:
1) [23.05.0](https://github.com/Slava-Shchipunov/awg-openwrt/releases/tag/v23.05.0)
2) [23.05.1](https://github.com/Slava-Shchipunov/awg-openwrt/releases/tag/v23.05.1)
3) [23.05.2](https://github.com/Slava-Shchipunov/awg-openwrt/releases/tag/v23.05.2)
4) [23.05.3](https://github.com/Slava-Shchipunov/awg-openwrt/releases/tag/v23.05.3)
5) [23.05.4](https://github.com/Slava-Shchipunov/awg-openwrt/releases/tag/v23.05.4)
6) [23.05.5](https://github.com/Slava-Shchipunov/awg-openwrt/releases/tag/v23.05.5)
7) AWG-2.0 [23.05.6](https://github.com/Slava-Shchipunov/awg-openwrt/releases/tag/v23.05.6)
8) [24.10.0](https://github.com/Slava-Shchipunov/awg-openwrt/releases/tag/v24.10.0)
9) [24.10.1](https://github.com/Slava-Shchipunov/awg-openwrt/releases/tag/v24.10.1)
10) [24.10.2](https://github.com/Slava-Shchipunov/awg-openwrt/releases/tag/v24.10.2)
11) AWG-2.0 [24.10.3](https://github.com/Slava-Shchipunov/awg-openwrt/releases/tag/v24.10.3)

I also ran the build for version [22.03.7](https://github.com/Slava-Shchipunov/awg-openwrt/releases/tag/v22.03.7), but the build ended with an error for two platforms. Since this is a fairly old version of OpenWRT, I did not bother to figure out what the problem was.

In the future, when new OpenWRT releases are released, releases with AmneziaWG packages will be automatically created and the package build will be launched for all devices supported by the new version. Github action for checking for a new release is launched automatically every 3 days, and can also be launched manually.

## Automatic package build for SNAPSHOT version
A github action is configured in the repository, which runs every 4 hours and checks the [snapshots page](https://downloads.openwrt.org/snapshots/targets/) of the OpenWRT website. At the same time, if a snapshot with a newer kernel version is found for some platform, the package build for this platform is launched, and the new files replace the old ones. In order to save resources and speed up the build process, packages are built only for popular platforms, which are specified in the `SNAPSHOT_SUBTARGETS_TO_BUILD` array in the index.js file.

## Selecting packages for your device
In accordance with the paragraph [Specify variables for builds](https://github.com/itdoginfo/domain-routing-openwrt/wiki/Amnezia-WG-Build#%D1%83%D0%BA%D0%B0%D0%B7%D1%8B%D0%B2%D0%B0%D0%B5%D0%BC-%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D1%8B%D0%B5-%D0%B4%D0%BB%D1%8F-%D1%81%D0%B1%D0%BE%D1%80%D0%BA%D0%B8) (instructions in Russian) determine `target` and `subtarget` of your device. Then go to the release page corresponding to your OpenWRT version, then search the page (Ctrl+F) to find 3 packages whose names end in `target_subtarget.ipk` corresponding to your device. For AWG 2.0 version, Russian localization package luci-i18n-amneziawg-ru is also available

## How to run a build for all supported devices
1) Create a fork of this repository
2) Switch to the Actions tab and enable Github actions (they are disabled for forks by default)
3) Then go to the Code tab => Releases (on the right side of the screen) => Draft a new release
4) Click Choose a tag and create a new tag in the vX.X.X format, where you need to substitute the required OpenWRT version for X.X.X, for example, v23.05.4
5) Select the `master` branch as the target
6) Enter Release title
7) Click the green Publish release button at the bottom

For public repositories, Github provides unlimited use of runners, I had up to 20 parallel jobs running. Each job takes about 10-15 minutes, the total build time is about 60 minutes.

## Building packages for a specific platform
You can see how to start building AWG 1.0 packages for a specific platform in the [wiki instructions](https://github.com/itdoginfo/domain-routing-openwrt/wiki/Amnezia-WG-Build) (instructions in Russian). Building for one device will take about 2 hours.

AWG 2.0 can be built for a specific platform as follows:
1) Create a fork of this repository
2) Switch to the Actions tab and enable Github actions (they are disabled for forks by default)
3) On the left in the list of actions, select the Create Release on Tag action
4) On the right, click the Run workflow button
5) In the opened list, specify the OpenWRT version (for example, 24.10.3), a list of targets separated by commas (for example, stm32,ramips), a list of subtargets separated by commas (for example, stm32mp1,mt7621). The build will be performed only for existing target/subtarget pairs
6) Click the green Run workflow button
Building for one device will take about 10-15 minutes. A release with the specified OpenWRT version should be created
